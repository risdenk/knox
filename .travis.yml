# Configuration file for Travis continuous integration.
# See https://travis-ci.org/apache/knox
#
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to you under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
language: java
jdk:
  - openjdk8
cache:
  directories:
    - $HOME/.m2

env:
  global:
   # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
   #   via the "travis encrypt" command using the project repo's public key
   - secure: "g80rzaoKGwzhnq/OV0W0EMSSe9Wx8ea8zHbd8UzkRFH60HyfC0MPsCJaag6MVcVQYVsTTzOYxHUci3QnK2+goTGfayF5v/+SweqfO0QitbFN0XYc6uNU0gRIwZKKOpecM6ICRQ77+7Mtb2L2G+vqMvVD3jeaMuDl/ZbxMLKBAJueXakcZrVnozJTstBomuDIuiteM+rV9dWSKZR8HlLchihOuL9pSQv/sO7kqpBuXpaRY3MQx+xd3GVEQBskINRRYJwhtDZ1r29ywJ/6DfYRVvtq7InYIVi0cHpAwDDX6B6SGrYc28bmqkpfwOdkHVq/Eqx0LZk/h3Pp4EmOBvL3gQLS22HJdHidBU1MXfPEWpL8fgbylcfmDdGpHLEm5PdBTY1zm226TFQi78V+hOs4pyCZZHRIw9W9d2YEcomddPQ5p+5xOSV/J48jYUQ9kRfQ6UgktkSNMh0g1QYDdcST9pclYaXsnsyKfxM4/7I35RgbqSnJCU4bVWmv61rMvKqlmQJUjkrfNi498XqjoJi3n/M1+Fitpo8UsZ+FHAmGKSOPked0CLcILeQOsUFlx6VZBy50PykMGy2X+Vyz1WJgDyCCHxlZdipYQfmW4NQbRrELosWvP5rq5TwMykc7dzwj8nbFQeiw0NAmnupn4kQilXSsQriQIJ6QkoWLns/3oeg="

before_install:
  - echo -n | openssl s_client -connect https://scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-

install: true
script: true

addons:
  coverity_scan:
    project:
      name: "risdenk/knox"
      description: "Apache Knox"
    notification_email: krisden@apache.org
    build_command: "mvn -B -V package -DskipTests"
    branch_pattern: coverity_scan
